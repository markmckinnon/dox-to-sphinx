<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Autopsy User Documentation: Geolocation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Autopsy User Documentation<span id="projectnumber">&#160;4.19.3</span>
   </div>
   <div id="projectbrief">Graphical digital forensics platform for The Sleuth Kit and other tools.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">Autopsy User&#39;s Guide</a></li><li class="navelem"><a class="el" href="quick_start_guide.html">Quick Start Guide</a></li>  </ul>
</div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Geolocation </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#geo_overview">Overview</a></li>
<li class="level1"><a href="#geo_usage">Usage</a><ul><li class="level2"><a href="#geo_navigation">General Usage</a></li>
<li class="level2"><a href="#geo_filter">Filtering</a></li>
<li class="level2"><a href="#geo_report">Generating a Report</a></li>
</ul>
</li>
<li class="level1"><a href="#geo_map_options">Map Tile Options</a><ul><li class="level2"><a href="#geo_generate_zip">Using Maperative to Generate Tile Image Zip Files</a><ul><li class="level3"><a href="#geo_generate_tile_image">Generating tile image zip files using any map data source:</a></li>
<li class="level3"><a href="#geo_add_ds">Adding a data source to Maperative</a></li>
<li class="level3"><a href="#geo_merge_osm">Merging OSM raw data extracts</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="geo_overview"></a>
Overview</h1>
<p>The Geolocation window shows artifacts that have longitude and latitude attributes as waypoints on a map. In the field, when access to online map tile servers may not be available, the Geolocation window provides support for offline map tile data sources.</p>
<div class="image">
<img src="geo_main.png" alt=""/>
</div>
<h1><a class="anchor" id="geo_usage"></a>
Usage</h1>
<p>To open the Geolocation window, click on the "Geolocation" button near the top of the main window, or go to "Tools" and then select "Geolocation".</p>
<h2><a class="anchor" id="geo_navigation"></a>
General Usage</h2>
<p>You can move the map by clicking and dragging, and zoom using either the mouse wheel or the slider in the bottom left of the map. If a map tile is not available, the tile will appear grey but the waypoints will still be displayed. This is more likely to happen when changing the default <a class="el" href="geolocation_page.html#geo_map_options">Map Tile Options</a>. Different types of waypoint will be displayed in different colors. You can use the key in the lower left to easily identify the type of each waypoint. Some types will also use different icons on the map. For example, individual track points will be displayed as smaller circles. The entire track will be highlighted when selecting an individual track point.</p>
<div class="image">
<img src="geo_track_points.png" alt=""/>
</div>
<p>You can left click on a waypoint to highlight that waypoint and show a details pop-up in the upper right corner of the map. The details pop-up will be updated as you click on different waypoints. The data displayed will vary depending on the type of waypoint. For example, this is a GPS bookmark:</p>
<div class="image">
<img src="geo_details_bookmark.png" alt=""/>
</div>
<p>While this is an image with GPS coordinates found by the <a class="el" href="_e_x_i_f_parser_page.html">Picture Analyzer Module</a> :</p>
<div class="image">
<img src="geo_details.png" alt=""/>
</div>
<p>You can also right click on a waypoint to bring up a similar menu to what you'd see in the <a class="el" href="result_viewer_page.html">Result Viewer</a>.</p>
<div class="image">
<img src="geo_context_menu.png" alt=""/>
</div>
<h2><a class="anchor" id="geo_filter"></a>
Filtering</h2>
<p>The filters are displayed on the left side of the screen. The top filter lets you filter the waypoints based on timestamp. If enabled, you will only see waypoints with a timestamp within N days of the most recent waypoint (not the current date). When using this filter, you can also choose whether you want to see waypoints with no timestamp.</p>
<div class="image">
<img src="geo_filter_time.png" alt=""/>
</div>
<p>The second filter allows you to show waypoints only for the selected data sources. Note that only data sources that contain geolocation data are displayed here.</p>
<div class="image">
<img src="geo_filter_datasource.png" alt=""/>
</div>
<p>The last filter allows you to only show certain types of waypoints. The number next to the type indicates how many waypoint of that type are in your case.</p>
<div class="image">
<img src="geo_filter_type.png" alt=""/>
</div>
<p>Once you are done setting up your filters, click the "Apply" button at the top of the filter panel.</p>
<p>If desired, the filter panel can be hidden by clicking on the vertical "Filters" tab on the top right edge of the filter panel. Clicking on that tab a second time will restore the filters panel.</p>
<h2><a class="anchor" id="geo_report"></a>
Generating a Report</h2>
<p>You can generate a KML report using the "KML Report" button in the bottom right corner of the window. The report will include only the currently visible waypoints and can be found in the "Reports" folder of your case.</p>
<div class="image">
<img src="geo_report.png" alt=""/>
</div>
<p>As with other <a class="el" href="reporting_page.html">report modules</a>, the generated report will appear under "Reports" in the <a class="el" href="tree_viewer_page.html">Tree Viewer</a>. Note that you can also use the <a class="el" href="reporting_page.html#report_kml">Google Earth KML</a> report module to generate a report containing all geolocation data in the case.</p>
<h1><a class="anchor" id="geo_map_options"></a>
Map Tile Options</h1>
<p>The Autopsy Geolocation window supports several map tile data source options. The map tile data source can be changed on the Geolocation panel in the Options dialog. There are four options for geolocation tile data, two of which can be used offline. </p><ul>
<li>
<b>Default online tile server</b> <ul>
<li>
The default Geolocation window tile data source is the Microsoft Virtual Earth server <a href="https://www.bing.com/maps">https://www.bing.com/maps</a>. </li>
</ul>
</li>
<li>
<b>OpenStreetMap server</b> <ul>
<li>
<p class="startli">You can specify the address of an OSM tile server. A list of online tile servers can be found here: <a href="https://wiki.openstreetmap.org/wiki/Tile_servers">https://wiki.openstreetmap.org/wiki/Tile_servers</a>. Tile servers may have restrictions on them that prevent Autopsy from accessing their tiles. If the tiles URL is something of the form "http://tiles.example.org/${z}/${x}/${y}.png", then you'll need to enter "http://tiles.example.org" in the options panel.</p>
<div class="image">
<img src="geo_openstreetmap.png" alt=""/>
</div>
 </li>
</ul>
</li>
<li>
<b>OpenStreetMap zip file</b> <ul>
<li>
Allows offline use of a zip file of OSM tile images </li>
<li>
Details on how to generate tile zip files are <a class="el" href="geolocation_page.html#geo_generate_zip">below</a>. </li>
</ul>
</li>
<li>
<b>MBTiles file</b> <ul>
<li>
Allows offline use of MBTiles file containing raster tiles. </li>
<li>
MBTiles raster tiles files can be downloaded from <a href="https://openmaptiles.com/downloads/planet/">OpenMapTiles</a>. </li>
<li>
OpenMapTiles provides downloads of MBTile files for areas as large as the whole planet to as small as regions of countries. </li>
<li>
For each of these regions there are at least four MBTiles available for download, please be sure to download one of the "Raster Tile" files, not the "Vector Tiles". </li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="geo_generate_zip"></a>
Using Maperative to Generate Tile Image Zip Files</h2>
<p>Maperative is a tool for drawing maps, however it can also be used to create tile images. Maperative downloads and documentations can be found at <a href="http://maperitive.net/">http://maperitive.net/</a> .</p>
<p>By default Maperative uses an online tile server to generate the map. For offline use, users can supply an OpenStreetMap raw data extract.</p>
<h3><a class="anchor" id="geo_generate_tile_image"></a>
Generating tile image zip files using any map data source:</h3>
<ol>
<li>
Download and run Maperative. </li>
<li>
Center and zoom in on an area of interest. The larger the area, the more tiles that will be generated. Tiles will be generated for the area visible in the map panel. </li>
<li>
Choose whether you want to use the default zoom levels or custom ones. Zoom levels in Mapertive start at 1. As the zoom level increases, so will the quantity of tiles generated as well as the detail of each tile. Generating tiles, especially for heavily populated areas, may take time. Please be patient with either method. <ul>
<li>
<p class="startli">To generate tiles using the default zoom levels, select Tools-&gt;Generate Tiles</p>
<div class="image">
<img src="geo_gen_tiles.png" alt=""/>
</div>
<p class="interli">Maperative will generate tiles for zoom levels depending on the area of interest and the zoom level. For example, if you start all the way zoomed out, you will likely see levels 1 through 10 generated. If you start zoomed in, you might see levels 10 through 14.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Maperative provides a command interface which allows you to generate tiles for specific zoom levels. Commands can be run in the Command prompt text field at the bottom of the Maperative window. For a full list of commands see the Maperative documentation or <a href="http://maperitive.net/docs/">http://maperitive.net/docs/</a>. The <code>generate-tiles</code> command can be used to generate tiles for the area visible in the map panel area. For full details on <code>generate-tiles</code> see the documentation included with Maperative or <a href="http://maperitive.net/docs/Commands/GenerateTiles.html">http://maperitive.net/docs/Commands/GenerateTiles.html</a>. The following is a sample command to generate tiles for zoom levels 2 to 3 into the folder Tiles: </p><pre class="fragment">generate-tiles minzoom=2 maxzoom=3 tilesdir=C:\Tiles </pre><div class="image">
<img src="geo_command_line.png" alt=""/>
</div>
<p class="endli"></p>
</li>
</ul>
</li>
<li>
<p class="startli">For use in autopsy, the generated tile images need to be in a zip file. To create a zip of tiles for use in Autopsy, zip up all of the folders in the tile file output directory. Do not include the parent directory, just the numbered folders contained within. If you use the menu bar option or did not specify a folder in your command, the generated tiles will be located in &lt;Maperative Install Location&gt;\Tiles.</p>
<div class="image">
<img src="geo_tile_folder.png" alt=""/>
</div>
<p class="endli">Be sure to zip only the contents of the folder, not the top level folder. <br  />
 </p>
</li>
</ol>
<h3><a class="anchor" id="geo_add_ds"></a>
Adding a data source to Maperative</h3>
<p>Maperative can be used to generate tiles using raw data extracts from OpenStreetMaps. Data extracts (*.osm or *.osm.pbf) files can be downloaded from various locations. See <a href="https://wiki.openstreetmap.org/wiki/Planet.osm">https://wiki.openstreetmap.org/wiki/Planet.osm</a> for a list of locations. Geofabrik's free download server has open OpenStreetMap data extracts for many regions. When using OSM raw data extracts in Maperative, the recommendation is to use smaller (.osm) files. <br  />
</p>
<p>To add a data source to Maperative: </p><ol>
<li>
<p class="startli">Select from the menu bar File-&gt;Open Map Source...</p>
<div class="image">
<img src="geo_add_ds.png" alt=""/>
</div>
<p class="endli"></p>
</li>
<li>
The new data source will appear in the bottom right corner of the window in the "Map Sources" list. </li>
<li>
To disable a Map Source, select the Map Source from the list and click the X button. </li>
</ol>
<h3><a class="anchor" id="geo_merge_osm"></a>
Merging OSM raw data extracts</h3>
<p>For ease of use, users may want to merge OSM raw data extracts. OSMConvert is a tool that can be used to merge OSM raw data extracts. <br  />
</p>
<p>To merge two OSM raw data extracts country1.osm.pbf and country2.osm.pbf use the following commands. Note that this assumes that osmcovert and the files are in the same directory; if they are not, be sure to use full paths. </p><pre class="fragment">osmconvert country1.osm.pbf -o=country1.o5m
osmconvert country2.osm.pbf -o=country2.o5m
osmconvert country1.o5m country2.o5m -o=together.o5m
osmconvert together.o5m -o=together.osm.pbf
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
<hr/>
<p><i>Copyright &#169; 2012-2022 Basis Technology. Generated on Fri Feb 24 2023<br/> 
This work is licensed under a
<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/us/">Creative Commons Attribution-Share Alike 3.0 United States License</a>.
</i></p>
</body>
</html>
