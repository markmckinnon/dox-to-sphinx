<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Autopsy User Documentation: Command Line Ingest</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Autopsy User Documentation<span id="projectnumber">&#160;4.19.3</span>
   </div>
   <div id="projectbrief">Graphical digital forensics platform for The Sleuth Kit and other tools.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">Autopsy User&#39;s Guide</a></li>  </ul>
</div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Command Line Ingest </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#command_line_ingest_overview">Overview</a></li>
<li class="level1"><a href="#command_line_ingest_config">Configuration</a><ul><li class="level2"><a href="#command_line_ingest_profile">Configuring Ingest Profiles</a></li>
<li class="level2"><a href="#command_line_report_profile">Configuring Report Profiles</a></li>
</ul>
</li>
<li class="level1"><a href="#command_line_ingest_commands">Command Options</a><ul><li class="level2"><a href="#command_line_cases">Creating and Opening Cases</a></li>
<li class="level2"><a href="#command_line_ds">Adding a New Data Source and Running Ingest</a></li>
<li class="level2"><a href="#command_line_existing_ds">Running Ingest on an Existing Data Source</a></li>
<li class="level2"><a href="#command_line_report">Generating Reports</a></li>
<li class="level2"><a href="#command_line_listds">Listing All Data Sources</a></li>
<li class="level2"><a href="#command_line_listip">Listing All Ingest Profiles</a></li>
</ul>
</li>
<li class="level1"><a href="#command_line_ingest_run">Running Autopsy</a></li>
<li class="level1"><a href="#command_line_ingest_results">Viewing Results</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="command_line_ingest_overview"></a>
Overview</h1>
<p>The Command Line Ingest feature allows you to run many of Autopsy's functions from the command line. You can add data sources to cases, choose which ingest modules to run, and automatically generate a report. When complete, these cases can be opened as normal or you can simply use the reports and other output without opening Autopsy.</p>
<h1><a class="anchor" id="command_line_ingest_config"></a>
Configuration</h1>
<p>To configure command line ingest, go to Tools-&gt;Options and then select the "Command Line Ingest" tab. If you would like to create or open multi-user cases, you'll need to <a class="el" href="install_multiuser_page.html">configure the multi-user settings</a>.</p>
<div class="image">
<img src="command_line_ingest_options.png" alt=""/>
</div>
<h2><a class="anchor" id="command_line_ingest_profile"></a>
Configuring Ingest Profiles</h2>
<p>From the options panel you can configure the default ingest profile. This is the same as normal <a class="el" href="ingest_page.html">ingest module</a> configuration - choose a file filter then enable or disable the individual ingest modules, changing their settings if desired. Press "OK" to save your settings.</p>
<p>Currently custom ingest profiles can not be configured on the command line ingest options panel but they can be created through the <a class="el" href="ingest_page.html">ingest options panel</a> and then used on the command line. Here we've created an ingest profile that will only process image file types and will only run certain ingest modules.</p>
<div class="image">
<img src="command_line_ingest_profile.png" alt=""/>
</div>
<p>See the section on <a class="el" href="command_line_ingest_page.html#command_line_ds">running ingest</a> below for instructions on specifying an ingest profile on the command line.</p>
<h2><a class="anchor" id="command_line_report_profile"></a>
Configuring Report Profiles</h2>
<p>You can set up report profiles to use with command line ingest. You'll start with a "default" profile and can create additional profiles. Each profile will allow you to generate one type of report. Configuration is generally the same as normal <a class="el" href="reporting_page.html">report generation</a> with some slight differences. This is mainly seen in places where your options are dependent on the open case, such as choosing <a class="el" href="tagging_page.html">tags</a> to report on or <a class="el" href="interesting_files_identifier_page.html">interesting file</a> set names to include. For example, the HTML report normally allows you to choose specific tags to include but for command line ingest it will only have the option to include all tags.</p>
<p>If you wish to create additional report profiles, select "Make new profile" in the drop-down menu and then click the "Configure" button. You'll be prompted to name your new report profile and then will go through the normal report configuration. Having multiple report profiles will allow you to easily generate different report types from the command line. For example, you might have an "htmlReport" report profile that creates the HTML report and another report profile to generate KML reports. See the <a class="el" href="command_line_ingest_page.html#command_line_report">report generation</a> section below for directions on how to specifiy a report profile on the command line.</p>
<h1><a class="anchor" id="command_line_ingest_commands"></a>
Command Options</h1>
<p>In a command prompt, navigate to the Autopsy bin folder. This is normally located at "C:\Program Files\Autopsy-version\bin".</p>
<div class="image">
<img src="command_line_ingest_bin_dir.png" alt=""/>
</div>
<p>The table below shows a summary of the command line operations. You can run one or more at a time, though you must always either create a case or open an existing case.</p>
<p><br  />
 </p><table class="doxtable">
<tr>
<th>Operation</th><th>Command(s)</th><th>Parameter(s)</th><th>Example </th></tr>
<tr>
<td><b>Create New Case</b></td><td><pre>--createCase</pre></td><td><pre>--caseName
--caseBaseDir
--caseType (optional)</pre></td><td><pre>--createCase --caseName="test5" --caseBaseDir="C:\work\cases"
--createCase --caseName="test_multi" --caseBaseDir="\\WIN-2913\work\cases" --caseType="multi"</pre><p class="endtd"></p>
</td></tr>
<tr>
<td><b>Open Existing Case</b></td><td>&#160;</td><td><pre>--caseBaseDir</pre></td><td><pre>--caseBaseDir="C:\work\Cases"</pre><p class="endtd"></p>
</td></tr>
<tr>
<td><b>Add a Data Source</b></td><td><pre>--addDataSource
--runIngest (optional)
--runIngest=(ingest profile name) (optional)</pre></td><td><pre>--dataSourcePath</pre></td><td><pre>--addDataSource --dataSourcePath="R:\work\images\small2.img" --runIngest</pre><p class="endtd"></p>
</td></tr>
<tr>
<td><b>Run Ingest on Existing Data Source</b></td><td><pre>--runIngest
--runIngest=(ingest profile name)</pre></td><td><pre>--dataSourceObjectId</pre></td><td><pre>--runIngest --dataSourceObjectId=1
--runIngest="imageAnalysis" --dataSourceObjectId=1</pre><p class="endtd"></p>
</td></tr>
<tr>
<td><b>Generate Reports</b></td><td><pre>--generateReports
--generateReports=(report profile name)</pre></td><td>&#160;</td><td><pre>--generateReports
--generateReports="kmlReport"</pre><p class="endtd"></p>
</td></tr>
<tr>
<td><b>Create List of Data Sources</b></td><td><pre>--listAllDataSources</pre></td><td>&#160;</td><td><pre>--listAllDataSources</pre> </td></tr>
<tr>
<td><b>Create List Ingest Profiles</b></td><td><pre>--listAllIngestProfiles</pre></td><td>&#160;</td><td><pre>--listAllIngestProfiles</pre> </td></tr>
</table>
<p>More details on each operation along with additional examples are given below.</p>
<h2><a class="anchor" id="command_line_cases"></a>
Creating and Opening Cases</h2>
<p>You will always need to either create a case or give the path to an existing case. When creating a case, the current timestamp will be added to the case name. For example, running this command:</p>
<pre class="fragment">autopsy64.exe --createCase --caseName="test5" --caseBaseDir="C:\work\cases"
</pre><p>could create a case folder "test5_2019_09_20_11_01_29". Note that even though a timestamp is added to the name, the &ndash;caseName field must be unique for each run.</p>
<div class="image">
<img src="command_line_ingest_case_folder.png" alt=""/>
</div>
<p>By default all cases will be single user. If you would like to create a multi-user case you'll need the -caseType field. You should also use the network path to your case folder so the services can access it:</p>
<pre class="fragment">autopsy64.exe --createCase --caseName="test_multi" --caseBaseDir="\\WIN-2913\work\cases" --caseType="multi"
</pre><p>Once a case is created you will need to use the full path to the case instead of the case name and base folder. For example, if we created the empty case "test5" as above, we could use the following command to add a data source to it:</p>
<pre class="fragment">autopsy64.exe --caseName="test5" --caseBaseDir="C:\work\Cases" --addDataSource 
   --dataSourcePath="R:\work\images\small2.img"
</pre><p>The case type (single or multi-user) does not have to be specified when opening a case.</p>
<h2><a class="anchor" id="command_line_ds"></a>
Adding a New Data Source and Running Ingest</h2>
<p>You can add a data source to a new case or an existing case using the &ndash;addDataSource option and then giving the path to the data source. If you use the &ndash;runIngest option, the ingest modules you selected in the <a class="el" href="command_line_ingest_page.html#command_line_ingest_config">configuration step</a> will be run on the data source. Both <a class="el" href="ds_page.html#ds_img">disk images</a> and <a class="el" href="ds_page.html#ds_log">logical files</a> are supported. You can only add one data source at a time.</p>
<p>In this example, we'll create a new case named "test6" and add the data source "blue_images.img".</p>
<pre class="fragment">autopsy64.exe --createCase --caseName="test6" --caseBaseDir="C:\work\cases" --addDataSource 
   --dataSourcePath="R:\work\images\blue_images.img"
</pre><p>And here we'll add another data source ("green_images.img") to the case we just made and run ingest on it. Note that ingest will only run on the new data source ("green_images.img"), not the one already in the case ("blue_images.img").</p>
<pre class="fragment">autopsy64.exe --caseName="test6" --caseBaseDir="C:\work\cases" --addDataSource --runIngest 
   --dataSourcePath="R:\work\images\green_images.img"
</pre><p>Next we'll add a third data source ("red_images.img") to the case and run ingest using a custom ingest profile "imageAnalysis" created as described in the <a class="el" href="command_line_ingest_page.html#command_line_ingest_profile">Configuring Ingest Profiles</a> section above.</p>
<pre class="fragment">autopsy64.exe --caseName="test6" --caseBaseDir="C:\work\cases" --addDataSource --runIngest="imageAnalysis"
   --dataSourcePath="R:\work\images\red_images.img"
</pre><p>Finally we'll add a folder ("Test files") as a logical file set to a new case ("test9").</p>
<pre class="fragment">autopsy64.exe --createCase --caseName="test9" --caseBaseDir="C:\work\Cases" --addDataSource 
   --dataSourcePath="R:\work\images\Test files" --runIngest
</pre><h2><a class="anchor" id="command_line_existing_ds"></a>
Running Ingest on an Existing Data Source</h2>
<p>You can run ingest on a data source already in the case if you know its object ID. To find this, go to the case folder and open the "Command Output" folder.</p>
<div class="image">
<img src="command_line_ingest_output_folder.png" alt=""/>
</div>
<p>If you've run with the &ndash;listAllDataSources option, there will be at least one file starting "listAllDataSources". Open the most recent one - the format will be similar to this:</p>
<pre class="fragment">{
  "@dataSourceName" : "blue_images.img",
  "@dataSourceObjectId" : "1"
} {
  "@dataSourceName" : "green_images.img",
  "@dataSourceObjectId" : "84"
}
</pre><p>You can also look through the addDataSource files to find the one corresponding to the file you want to ingest. The format will be the same. Once you know the data source object ID, you can use the &ndash;dataSourceObjectId option to specify it. For example, this will run ingest on "blue_images.img":</p>
<pre class="fragment">autopsy64.exe --caseName="test6" --caseBaseDir="C:\work\cases" --runIngest --dataSourceObjectId=1
</pre><h2><a class="anchor" id="command_line_report"></a>
Generating Reports</h2>
<p>You can generate a report on the case using the &ndash;generateReports option. You can select which report type to export through the Autopsy options panel (see the <a class="el" href="command_line_ingest_page.html#command_line_ingest_config">configuration section</a>). This option can be run alone or at the same time as you're processing a data source. In this example we're adding a new data source ("small2.img") and generating a report.</p>
<pre class="fragment">autopsy64.exe --caseName="test6" --caseBaseDir="C:\work\cases" --addDataSource
   --dataSourcePath="R:\work\images\small2.img" --runIngest --generateReports
</pre><p>The example above uses the default report profile. If you set up a custom report profile as described in the <a class="el" href="command_line_ingest_page.html#command_line_report_profile">Configuring Ingest Profiles section</a> above, you can specify that profile after the &ndash;generateReports option.</p>
<pre class="fragment">autopsy64.exe --caseName="test6" --caseBaseDir="C:\work\cases" --generateReports="html"
</pre><h2><a class="anchor" id="command_line_listds"></a>
Listing All Data Sources</h2>
<p>You can add the &ndash;listAllDataSources at any time to output a list of all data sources currently in the case along with their object IDs, to be used when <a class="el" href="command_line_ingest_page.html#command_line_existing_ds">running on an existing data source</a>. This command can even be run alone with just the path to the case.</p>
<pre class="fragment">autopsy64.exe --caseName="test6" --caseBaseDir="C:\work\cases\" --listAllDataSources
</pre><h2><a class="anchor" id="command_line_listip"></a>
Listing All Ingest Profiles</h2>
<p>You can add the &ndash;listAllIngestProfiles at any time to output a list of all ingest profiles. This command can be run alone without other options.</p>
<pre class="fragment">autopsy64.exe --listAllIngestProfiles
</pre><p>If there are ingest profiles the output will be similar to:</p>
<pre class="fragment">Listing ingest profiles
{
  "name" : "IngestProfile1",
  "description" : "This is a description of IngestProfile1",
  "fileIngestFilter" : "All Files, Directories, and Unallocated Space"
} 
{
  "name" : "IngestProfile2",
  "description" : "This is a description of IngestProfile2",
  "fileIngestFilter" : "All Files, Directories, and Unallocated Space"
}
Ingest profile list complete
</pre><h1><a class="anchor" id="command_line_ingest_run"></a>
Running Autopsy</h1>
<p>Once you determine which parameters you need, it's time to run Autopsy. In the example below we're creating a new case ("xpCase"), adding a data source to it ("xp-sp3-v4.001"), running ingest and generating a report. The report type was <a class="el" href="command_line_ingest_page.html#command_line_ingest_config">configured</a> earlier to be an HTML report.</p>
<div class="image">
<img src="command_line_ingest_command_entry.png" alt=""/>
</div>
<p>If you've entered everything correctly, Autopsy will load and you'll see this dialog in the middle of the screen:</p>
<div class="image">
<img src="command_line_ingest_dialog.png" alt=""/>
</div>
<p>If you entered something incorrectly you will likely see an error in the output. You'll want to compare what you ran with the descriptions and examples above to try to fix the error.</p>
<p>If everything works correctly, you'll see a log of the processing being done and Autopsy will close when finished.</p>
<div class="image">
<img src="command_line_ingest_console_output.png" alt=""/>
</div>
<h1><a class="anchor" id="command_line_ingest_results"></a>
Viewing Results</h1>
<p>You can open the case you created directly from the command line by specifying either the case folder or the path to the ".aut" file. Remember that the folder name will have a timestamp appended to your case name. </p><pre class="fragment">autopsy64.exe "C:\work\cases\xpCase_2019_09_20_14_39_25"
autopsy64.exe "C:\work\cases\xpCase_2019_09_20_14_39_25\xpCase.aut"
</pre><p>You can also open the case normally through Autopsy. Simply go to "Open Case" and then browse to the output folder you set up in the <a class="el" href="command_line_ingest_page.html#command_line_ingest_config">Configuration</a> section and look for the folder starting with your case name. It will have a timestamp appended to the name you specified.</p>
<div class="image">
<img src="command_line_ingest_open_case.png" alt=""/>
</div>
<p>If you are only interested in the reports then you don't need to open Autopsy. You can just browse to the "Reports" folder in the case and access the reports directly.</p>
<div class="image">
<img src="command_line_ingest_report.png" alt=""/>
</div>
 </div></div><!-- contents -->
</div><!-- PageDoc -->
<hr/>
<p><i>Copyright &#169; 2012-2022 Basis Technology. Generated on Fri Feb 24 2023<br/> 
This work is licensed under a
<a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/us/">Creative Commons Attribution-Share Alike 3.0 United States License</a>.
</i></p>
</body>
</html>
